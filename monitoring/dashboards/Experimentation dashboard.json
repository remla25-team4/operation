{
  "dashboard": {
    "id": null,
    "title": "Time to Click Comparison",
    "timezone": "browser",
    "schemaVersion": 38,
    "version": 1,
    "refresh": "10s",
    "panels": [
      {
        "type": "stat",
        "title": "Average Time to Click - Main",
        "id": 1,
        "gridPos": { "x": 0, "y": 0, "w": 12, "h": 6 },
        "datasource": {
          "type": "prometheus",
          "uid": "PBFA97CFB590B2093"
        },
        "targets": [
          {
            "expr": "rate(time_to_click_seconds_sum{version=\"main\"}[1m]) / rate(time_to_click_seconds_count{version=\"main\"}[1m])",
            "format": "time_series",
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "options": {
          "reduceOptions": {
            "calcs": ["last"],
            "fields": "",
            "values": false
          },
          "orientation": "horizontal"
        }
      },
      {
        "type": "stat",
        "title": "Average Time to Click - Canary",
        "id": 2,
        "gridPos": { "x": 12, "y": 0, "w": 12, "h": 6 },
        "datasource": {
          "type": "prometheus",
          "uid": "PBFA97CFB590B2093"
        },
        "targets": [
          {
            "expr": "rate(time_to_click_seconds_sum{version=\"canary\"}[1m]) / rate(time_to_click_seconds_count{version=\"canary\"}[1m])",
            "format": "time_series",
            "interval": "",
            "legendFormat": "",
            "refId": "B"
          }
        ],
        "options": {
          "reduceOptions": {
            "calcs": ["last"],
            "fields": "",
            "values": false
          },
          "orientation": "horizontal"
        }
      },
      {
        "type": "barchart",
        "title": "Time to Click Distribution",
        "id": 3,
        "gridPos": { "x": 0, "y": 6, "w": 24, "h": 10 },
        "datasource": {
          "type": "prometheus",
          "uid": "PBFA97CFB590B2093"
        },
        "targets": [
          {
            "expr": "histogram_quantile(0.5, sum(rate(time_to_click_seconds_bucket[1m])) by (le, version))",
            "refId": "C",
            "legendFormat": "P50 - {{version}}"
          },
          {
            "expr": "histogram_quantile(0.9, sum(rate(time_to_click_seconds_bucket[1m])) by (le, version))",
            "refId": "D",
            "legendFormat": "P90 - {{version}}"
          },
          {
            "expr": "histogram_quantile(0.99, sum(rate(time_to_click_seconds_bucket[1m])) by (le, version))",
            "refId": "E",
            "legendFormat": "P99 - {{version}}"
          }
        ],
        "options": {
          "orientation": "horizontal",
          "showLegend": true
        }
      }
    ]
  }
}
